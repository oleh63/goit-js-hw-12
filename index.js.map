{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\n\nconst API_KEY = '46966788-e70827204bebbcb7a27eabe68';\nconst BASE_URL = 'https://pixabay.com/api/';\n\n\nexport async function fetchImages(query, page = 1, perPage = 15) {\n    const url = `${BASE_URL}?key=${API_KEY}&q=${encodeURIComponent(query)}&image_type=photo&orientation=horizontal&safesearch=true&page=${page}&per_page=${perPage}`;\n\n    try {\n        const response = await axios.get(url);\n        return response.data;\n    } catch (error) {\n        console.error('Error fetching images:', error);\n        return null;\n    }\n}","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nconst gallery = document.querySelector('.gallery');\nconst LoadMoreBtn = document.querySelector('.button-load');\n\nexport function renderGallery(images, galleryElement) {\n    const markup = images.map(image => {\n        return `\n            <a href=\"${image.largeImageURL}\" class=\"gallery-item\">\n                <img src=\"${image.webformatURL}\" alt=\"${image.tags}\" width=\"360\" height=\"200\" loading=\"lazy\" />\n                <div class=\"info\">\n                    <p>Likes: ${image.likes}</p>\n                    <p>Views: ${image.views}</p>\n                    <p>Comments: ${image.comments}</p>\n                    <p>Downloads: ${image.downloads}</p>\n                </div>\n            </a>\n        `;\n    }).join('');\n    \n    gallery.insertAdjacentHTML('beforeend', markup);\n\n    const lightbox = new SimpleLightbox('.galerry a');\n    lightbox.refresh();\n}\n\n\nexport function smoothScroll() {\n    const { height: cardHeight } = document.querySelector('.gallery-item').getBoundingClientRect();\n    window.scrollBy({\n        top: cardHeight * 2,\n        behavior: 'smooth',\n    });\n}\n\nexport function toggleLoadMoreButton(show) {\n    LoadMoreBtn.style.display = show ? 'block' : 'none';\n}\n","import { fetchImages } from './js/pixabay-api';\nimport { renderGallery, smoothScroll, toggleLoadMoreButton } from './js/render-functions';\nimport iziToast from 'izitoast';\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nconst form = document.getElementById('form-js');\nconst gallery = document.querySelector('.gallery');\nconst LoadMoreBtn = document.querySelector('.button-load');\nconst loader = document.querySelector('.loader');\nconst searchInput = document.getElementById('search-input');\n\nlet currentPage = 1;\nlet currentQuery = '';\nlet totalHits = 0;\n\nform.addEventListener('submit', async (event) => {\n    event.preventDefault();\n    currentQuery = searchInput.value.trim();\n    if (currentQuery === '') {\n        return;\n    }\n\n    currentPage = 1;\n    gallery.innerHTML = '';\n    toggleLoadMoreButton(false);\n    loader.style.display = 'block';\n\n    await loadImages();\n\n    loader.style.display = 'none';\n    if (totalHits > 15) {\n        toggleLoadMoreButton(true);\n    }\n});\n\n\nLoadMoreBtn.addEventListener('click', async () => {\n    currentPage += 1;\n    loader.style.display = 'block';\n    await loadImages();\n    loader.style.display = 'none';\n    smoothScroll();\n});\n\nasync function loadImages() {\n    const data = await fetchImages(currentQuery, currentPage);\n    if (!data || data.hits.lenght === 0) {\n        iziToast.error({\n            title: 'Error',\n            message: \"No images found. Please try another search.\",\n            position: 'topRight'\n        });\n        toggleLoadMoreButton(false);\n        return;\n    }\n\n    totalHits = data.totalHits;\n    renderGallery(data.hits);\n\n    if (currentPage * 15 >= totalHits) {\n        toggleLoadMoreButton(false);\n        iziToast.info({\n            title: 'Info',\n            message: \"We're sorry, but you reached the of search results.\",\n            position: 'topRight'\n        });\n    }\n}\n\n\n\n\n\n"],"names":["API_KEY","BASE_URL","fetchImages","query","page","perPage","url","axios","error","gallery","LoadMoreBtn","renderGallery","images","galleryElement","markup","image","SimpleLightbox","smoothScroll","cardHeight","toggleLoadMoreButton","show","form","loader","searchInput","currentPage","currentQuery","totalHits","event","loadImages","data","iziToast"],"mappings":"owBAEA,MAAMA,EAAU,qCACVC,EAAW,2BAGV,eAAeC,EAAYC,EAAOC,EAAO,EAAGC,EAAU,GAAI,CAC7D,MAAMC,EAAM,GAAGL,CAAQ,QAAQD,CAAO,MAAM,mBAAmBG,CAAK,CAAC,iEAAiEC,CAAI,aAAaC,CAAO,GAE9J,GAAI,CAEA,OADiB,MAAME,EAAM,IAAID,CAAG,GACpB,IACnB,OAAQE,EAAO,CACZ,eAAQ,MAAM,yBAA0BA,CAAK,EACtC,IACV,CACL,CCbA,MAAMC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,cAAc,EAElD,SAASC,EAAcC,EAAQC,EAAgB,CAClD,MAAMC,EAASF,EAAO,IAAIG,GACf;AAAA,uBACQA,EAAM,aAAa;AAAA,4BACdA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,gCAElCA,EAAM,KAAK;AAAA,gCACXA,EAAM,KAAK;AAAA,mCACRA,EAAM,QAAQ;AAAA,oCACbA,EAAM,SAAS;AAAA;AAAA;AAAA,SAI9C,EAAE,KAAK,EAAE,EAEVN,EAAQ,mBAAmB,YAAaK,CAAM,EAE7B,IAAIE,EAAe,YAAY,EACvC,QAAO,CACpB,CAGO,SAASC,GAAe,CAC3B,KAAM,CAAE,OAAQC,GAAe,SAAS,cAAc,eAAe,EAAE,wBACvE,OAAO,SAAS,CACZ,IAAKA,EAAa,EAClB,SAAU,QAClB,CAAK,CACL,CAEO,SAASC,EAAqBC,EAAM,CACvCV,EAAY,MAAM,QAAUU,EAAO,QAAU,MACjD,CCjCA,MAAMC,EAAO,SAAS,eAAe,SAAS,EACxCZ,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAc,SAAS,cAAc,cAAc,EACnDY,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,eAAe,cAAc,EAE1D,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAY,EAEhBL,EAAK,iBAAiB,SAAU,MAAOM,GAAU,CAC7CA,EAAM,eAAc,EACpBF,EAAeF,EAAY,MAAM,OAC7BE,IAAiB,KAIrBD,EAAc,EACdf,EAAQ,UAAY,GACpBU,EAAqB,EAAK,EAC1BG,EAAO,MAAM,QAAU,QAEvB,MAAMM,EAAU,EAEhBN,EAAO,MAAM,QAAU,OACnBI,EAAY,IACZP,EAAqB,EAAI,EAEjC,CAAC,EAGDT,EAAY,iBAAiB,QAAS,SAAY,CAC9Cc,GAAe,EACfF,EAAO,MAAM,QAAU,QACvB,MAAMM,EAAU,EAChBN,EAAO,MAAM,QAAU,OACvBL,GACJ,CAAC,EAED,eAAeW,GAAa,CACxB,MAAMC,EAAO,MAAM3B,EAAYuB,EAAcD,CAAW,EACxD,GAAI,CAACK,GAAQA,EAAK,KAAK,SAAW,EAAG,CACjCC,EAAS,MAAM,CACX,MAAO,QACP,QAAS,8CACT,SAAU,UACtB,CAAS,EACDX,EAAqB,EAAK,EAC1B,MACH,CAEDO,EAAYG,EAAK,UACjBlB,EAAckB,EAAK,IAAI,EAEnBL,EAAc,IAAME,IACpBP,EAAqB,EAAK,EAC1BW,EAAS,KAAK,CACV,MAAO,OACP,QAAS,sDACT,SAAU,UACtB,CAAS,EAET"}